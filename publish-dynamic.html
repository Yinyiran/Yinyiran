<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>发布动态</title>
    <link rel="stylesheet" href="font/iconfont.css">
    <link rel="stylesheet" href="css/publish.css">
</head>
<body>

    <div class="container">
        <form class="" action="" method="post">
            <div class="items clearfix">
                <span><b>书</b>名：</span>
                <div id="chooseBook">
                    <input type="text" name="" readonly="true" value="三生三世十里桃花">
                    <i class="iconfont icon-zhankai"></i>
                </div>
            </div>
            <div class="items clearfix">
                <span><b>目</b>标：</span>
                <input type="text" name="" placeholder="请输入目标">
            </div>
            <div class="items clearfix">
                <span><b>时</b>长：</span>
                <input type="text" name="" placeholder="请输入时长">分
            </div>
            <div class="items clearfix">
                <span>现已读到：</span>
                <input type="text" name="" placeholder="请输入页码">页
            </div>


            <!-- 输入简介 -->
            <div class="uploadinfo">
                <textarea name="" placeholder="说点什么吧"></textarea>
                <div class="uploadimg" id="uploadimg">
                    <input type="file" name="img" />
                    <span class="iconfont icon-add"></span>
                    <p>上传照片</p>
                </div>
            </div>
            <div id="imgbox"></div>

            <input class="btn" type="submit" name="" value="发布">
        </form>

        <!-- 书籍选择弹窗 -->
        <div class="mark">
            <ul class="list" id="bookBox">
                <li class="items clearfix">
                    <span><b>书</b>名：</span>
                    <div>
                        <input type="text" name="" readonly="true" value="三生三世十里桃花">
                        <i class="iconfont icon-shouqi"></i>
                    </div>
                </li>
                <li>我们不一样</li>
                <li>人民的名义</li>
                <li class="active">三生三世十里桃花</li>
                <li>陪你度过漫长的岁月</li>
                <li>平凡的世界</li>
                <li>安妮的椅子</li>
            </ul>
        </div>


        <!-- 登录信息错误提示框 -->
        <div class="errmark" id="errmark">
            <div class="errinfo">
                <h1>提示</h1>
                <p>图片大小错误，请重新上传</p>
                <p id="errbtn" class="btn">确 定</p>
            </div>
        </div>

    </div>


    <script type="text/javascript">
        window.onload = function () {

            // 书名选择 弹窗 显示赋值；
            var box = document.getElementById('bookBox'),
                boxInput = box.getElementsByTagName('input')[0],
                choose = document.getElementById('chooseBook'),
                chooseInput = choose.getElementsByTagName('input')[0];
            // 事件委托到li和Input;
            box.addEventListener('click', function(e) {
                var tagName = e.target.tagName.toLowerCase();
                if (tagName == 'input') {
                    // 防止点击第一行的“书名”两个字隐藏；
                    e.stopPropagation();
                    box.parentNode.style.display = 'none';
                }
                // 点击li隐藏弹窗 并赋值；
                if (tagName == 'li') {
                    box.parentNode.style.display = 'none';
                    chooseInput.value = e.target.innerText;
                }
            });
            // 点击显示书籍选择弹窗
            chooseInput.onclick = function () {
                box.parentNode.style.display = 'block';
                // 弹窗inputvalue是展示的那个；
                boxInput.value = chooseInput.value;
            };


            // 弹窗隐藏
            var errmark = document.getElementById('errmark'),
                errbtn = errmark.getElementsByClassName('btn')[0];
            errbtn.onclick = function () {
                errmark.style.display = "none";
            };
        };
    </script>

</body>
</html>
